<div class="flex justify-end my-4 mr-4">
  <button (click)="closeDrawer.emit()" class="hover:scale-150 cursor-pointer">
    <i class="fa-solid fa-xmark text-lg"></i>
  </button>
</div>
<div class="flex items-center">
  <div class="relative">
    <img *ngIf="user.image" [src]="user.image" class="w-40 clip" />
    <div
      *ngIf="!user.image"
      class="w-40 h-40 bg-gray-400 text-white clip flex flex-col justify-center items-center"
    >
      <div>Upload</div>
      <div>Image</div>
    </div>
    <input
      type="file"
      accept="image/*"
      hidden
      (change)="onFileSelected($event)"
      #fileUpload
    />
    <button
      class="absolute right-2 bottom-2 bg-blue-500 hover:bg-blue-600 text-white px-2 py-2 rounded shadow cursor-pointer"
      (click)="fileUpload.click()"
    >
      <i class="fa-solid fa-pen"></i>
    </button>
  </div>
  <mat-form-field subscriptSizing="dynamic" appearance="outline">
    <mat-label>Name</mat-label>
    <input matInput type="text" [(ngModel)]="user.name" />
    <mat-hint class="text-red-400">{{errorMessage}}</mat-hint>
  </mat-form-field>
</div>
<div class="flex justify-center px-6">
  <ion-segment mode="ios" [value]="year" (ionChange)="onChangeYear()">
    <ion-segment-button
      value="2022"
      class="bg-[#FFCD5622] value2022"
      [ngStyle]="{ 'font-weight': year === '2022' ? 'bold' : 'normal' }"
    >
      <ion-label>2022</ion-label>
    </ion-segment-button>
    <ion-segment-button
      value="2023"
      class="bg-[#9966FF22] value2023"
      [ngStyle]="{ 'font-weight': year === '2023' ? 'bold' : 'normal' }"
    >
      <ion-label>2023</ion-label>
    </ion-segment-button>
  </ion-segment>
</div>
<table class="px-6">
  <tr>
    <th class="text-left">Monat</th>
    <th class="w-40">
      <div>Strom</div>
      <div class="text-sm">kWh</div>
    </th>
    <th class="w-40">
      <div>Wasser</div>
      <div class="text-sm">m&#179;</div>
    </th>
    <th class="w-40">
      <div>Gas</div>
      <div class="text-sm">kWh</div>
    </th>
  </tr>

  <tr *ngFor="let month of userConsumptions.controls; let i = index">
    <ng-container [formGroup]="month">
      <td>{{ "gimmicks.calendar.months." + months[i] | translate }}</td>
      <td class="text-center">
        <mat-form-field
          subscriptSizing="dynamic"
          appearance="outline"
          class="w-32 bg-[#FF6384]"
        >
          <input matInput type="number" formControlName="electricity" />
        </mat-form-field>
      </td>
      <td class="text-center">
        <mat-form-field
          subscriptSizing="dynamic"
          appearance="outline"
          class="w-32 bg-[#36A2EB]"
        >
          <input matInput type="number" formControlName="water" />
        </mat-form-field>
      </td>
      <td class="text-center">
        <mat-form-field
          subscriptSizing="dynamic"
          appearance="outline"
          class="w-32 bg-[#FF9F40]"
        >
          <input matInput type="number" formControlName="gas" />
        </mat-form-field>
      </td>
    </ng-container>
  </tr>
</table>
<ion-fab slot="fixed" vertical="bottom" horizontal="end">
  <button
    mat-fab
    matTooltip="Save"
    color="primary"
    [disabled]="isSaveButtonDisabled()"
    (click)="onSaveUser()"
  >
    <mat-icon>save</mat-icon>
  </button>
</ion-fab>
