<div class="flex flex-col gap-6 justify-center items-center h-full relative">
  <div class="-mb-4">{{ "gimmicks.games.opponent" | translate }}</div>
  <ion-segment
    [(ngModel)]="opponent"
    (ngModelChange)="onChangeOpponent()"
    mode="ios"
    class="w-[280px] mb-4"
  >
    <ion-segment-button value="human">
      <ion-label>{{ "gimmicks.games.human" | translate }}</ion-label>
    </ion-segment-button>
    <ion-segment-button value="computer">
      <ion-label>Computer</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div class="flex justify-center gap-6">
    <div class="bg-[#A52A2A] rounded p-2 w-[110px]">
      <div class="flex justify-center">
        <div class="w-5 h-5 rounded-full bg-[red]"></div>
      </div>
      <div class="flex gap-1 items-center mt-1">
        <input
          #name1Input
          [disabled]="!name1Edit"
          [(ngModel)]="name1ForEdit"
          class="p-1 w-full"
          type="text"
          [ngClass]="{
            'bg-yellow-300 text-black': !name1Edit,
            'bg-white text-black': name1Edit
          }"
          (keyup.enter)="onToggleName1()"
          (blur)="onName1Blur()"
        /><mat-icon
          *ngIf="!name1Edit"
          class="text-[18px] text-yellow-300 mt-[6px] cursor-pointer"
          fontIcon="edit"
          (click)="onToggleName1()"
        ></mat-icon>
        <mat-icon
          *ngIf="name1Edit"
          class="text-[18px] text-yellow-300 mt-[6px] cursor-pointer"
          fontIcon="save"
          (click)="onToggleName1()"
        ></mat-icon>
      </div>
    </div>
    <div
      *ngIf="opponent === 'human'"
      class="bg-[#A52A2A] rounded p-2 w-[110px]"
    >
      <div class="flex justify-center">
        <div class="w-5 h-5 rounded-full bg-[yellow]"></div>
      </div>
      <div class="flex gap-1 items-center mt-1">
        <input
          #name2Input
          [disabled]="!name2Edit"
          [(ngModel)]="name2ForEdit"
          class="p-1 w-full"
          type="text"
          [ngClass]="{
            'bg-yellow-300 text-black': !name2Edit,
            'bg-white text-black': name2Edit
          }"
          (keyup.enter)="onToggleName2()"
          (blur)="onName2Blur()"
        /><mat-icon
          *ngIf="!name2Edit"
          class="text-[18px] text-yellow-300 mt-[6px] cursor-pointer"
          fontIcon="edit"
          (click)="onToggleName2()"
        ></mat-icon>
        <mat-icon
          *ngIf="name2Edit"
          class="text-[18px] text-yellow-300 mt-[6px] cursor-pointer"
          fontIcon="save"
          (click)="onToggleName2()"
        ></mat-icon>
      </div>
    </div>
  </div>

  <div *ngIf="winner" class="text-green-400 mb-5 text-[24px]">
    {{ winner }} wins!
  </div>
  <div class="grid grid-rows-6 gap-1 justify-center">
    <div
      class="grid grid-cols-7 gap-1"
      *ngFor="let row of board; let rowIndex = index"
    >
      <div
        class="w-[30px] h-[30px] 2xl:w-[50px] 2xl:h-[50px] bg-gray-300 rounded-full cursor-pointer"
        *ngFor="let cell of row; let colIndex = index"
        [ngClass]="cell"
        (click)="dropDisc(colIndex)"
      ></div>
    </div>
  </div>
  <div *ngIf="!showDraw && !showWin" class="flex gap-2 items-center">
    <div
      class="w-5 h-5 rounded-full"
      [ngClass]="currentPlayer === 'Red' ? 'bg-[red]' : 'bg-[yellow]'"
    ></div>
    <div>
      {{ currentPlayer === "Red" ? name1 : name2
      }}{{ "gimmicks.games.turn" | translate }}
    </div>
  </div>
  <div class="flex justify-center mt-6">
    <button
      *ngIf="!showWin && !showDraw"
      (click)="resetBoard()"
      class="bg-yellow-300 rounded py-1 px-4"
    >
      {{ "gimmicks.games.reset" | translate }}
    </button>
  </div>
</div>
